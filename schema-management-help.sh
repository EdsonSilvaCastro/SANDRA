#!/bin/bash

# SANDRA Database Schema Management - Quick Reference
# Use this as a reference for future development and deployments

echo "üóÑÔ∏è SANDRA Database Schema Management Tools"
echo "=========================================="
echo ""

echo "üìã AVAILABLE TOOLS:"
echo ""
echo "üîç Schema Analysis & Detection:"
echo "  ./check-schema-changes.js       - Compare TypeScript types with database"
echo "  ./pre-deployment-check.sh       - Full pre-deployment validation"
echo "  ./test-production-db.js         - Test database connectivity & structure"
echo ""
echo "üõ†Ô∏è  Database Migrations:"
echo "  ./update-schema.sql             - Complete schema migration file"
echo "  ./add-extraordinary-tasks.sql   - Specific fix for extraordinary tasks"
echo "  ./quick-fix-extraordinary.sh    - Instructions for emergency fixes"
echo ""
echo "üöÄ Deployment & Testing:"
echo "  ./verify-deployment.js          - Verify deployed app version"
echo "  ./test-extraordinary-fix.sh     - Test extraordinary tasks functionality"
echo "  ./setup-github-actions.sh       - GitHub Actions configuration help"
echo ""
echo "üìö Documentation:"
echo "  ./DEPLOYMENT-CHECKLIST.md       - Complete deployment process"
echo "  ./README.md                     - Updated with schema management info"
echo ""

echo "üîÑ TYPICAL WORKFLOW:"
echo ""
echo "1Ô∏è‚É£  Before coding (if adding new fields):"
echo "   - Update types.ts with new interface properties"
echo "   - Update update-schema.sql with corresponding columns"
echo ""
echo "2Ô∏è‚É£  Before committing:"
echo "   - Git pre-commit hook will warn about potential issues"
echo "   - Run: node check-schema-changes.js"
echo ""
echo "3Ô∏è‚É£  Before deployment:"
echo "   - Run: ./pre-deployment-check.sh"
echo "   - Fix any schema issues found"
echo "   - Apply migrations in Supabase dashboard"
echo ""
echo "4Ô∏è‚É£  After deployment:"
echo "   - Run: ./verify-deployment.js"
echo "   - Monitor application for errors"
echo ""

echo "üö® EMERGENCY PROCEDURES:"
echo ""
echo "Database column missing error:"
echo "  1. Identify missing column from error message"
echo "  2. Add column: ALTER TABLE table_name ADD COLUMN column_name TYPE;"
echo "  3. Run in Supabase dashboard SQL editor"
echo "  4. Test functionality"
echo ""
echo "Schema out of sync:"
echo "  1. Run: node check-schema-changes.js"
echo "  2. Apply suggested migrations"
echo "  3. Re-run check to verify"
echo ""

echo "üìû QUICK LINKS:"
echo ""
echo "Supabase Dashboard: https://supabase.com/dashboard/project/chzqbcxhqszvsxynxdgj/sql"
echo "GitHub Actions:     https://github.com/EdsonSilvaCastro/SANDRA/actions"
echo "Production App:     https://d3lq44x3vjya24.cloudfront.net"
echo ""

echo "‚úÖ Schema management tools are now integrated into your workflow!"
echo "Future deployments will automatically check for schema compatibility."